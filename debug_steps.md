# üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫—Ä–æ—Å-–¥–µ–≤–∞–π—Å–Ω–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å

## –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–æ–∫–µ–Ω–∏ –≤ Firestore
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Firebase Console
2. Firestore Database ‚Üí –ö–æ–ª–µ–∫—Ü—ñ—è `device_tokens`
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ —î —Ç–æ–∫–µ–Ω–∏ –∑ –û–ë–û–• –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ –∑ `isActive: true`

## –ö—Ä–æ–∫ 2: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
1. Firestore Database ‚Üí –ö–æ–ª–µ–∫—Ü—ñ—è `scheduled_notifications`
2. –ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—è –¥–æ–∫—É–º–µ–Ω—Ç
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ–ª—è:
   - `processed: false`
   - `cancelled: –Ω–µ –º–∞—î –±—É—Ç–∏ true`
   - `scheduledFor` –º–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω—É –¥–∞—Ç—É/—á–∞—Å

## –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Cloud Functions
1. Firebase Console ‚Üí Functions
2. –ö–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ `processScheduledNotifications`
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Logs"
4. –®—É–∫–∞–π—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∏–ø—É:
   - "üì¨ –ó–Ω–∞–π–¥–µ–Ω–æ X —Å–ø–æ–≤—ñ—â–µ–Ω—å –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏"
   - "üì± –ó–Ω–∞–π–¥–µ–Ω–æ X –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤"
   - "‚úÖ –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ"

## –ö—Ä–æ–∫ 4: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è FCM –Ω–∞ –¥—Ä—É–≥–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó
–î–æ–¥–∞–π—Ç–µ –≤ –¥—Ä—É–≥–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π —Ç–∏–º—á–∞—Å–æ–≤–∏–π –∫–æ–¥ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```dart
// –í main.dart –ø—ñ—Å–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó FCM
Future.delayed(Duration(seconds: 5), () async {
  final token = FCMService().fcmToken;
  print('üîç –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê: FCM —Ç–æ–∫–µ–Ω = ${token?.substring(0, 20)}...');
  
  // –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ —Ç–æ–∫–µ–Ω –∑–±–µ—Ä—ñ–≥—Å—è –≤ Firestore
  final tokenDoc = await FirebaseFirestore.instance
      .collection('device_tokens')
      .doc(token)
      .get();
  
  print('üîç –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê: –¢–æ–∫–µ–Ω –≤ Firestore = ${tokenDoc.exists}');
  if (tokenDoc.exists) {
    print('üîç –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê: –î–∞–Ω—ñ —Ç–æ–∫–µ–Ω–∞ = ${tokenDoc.data()}');
  }
});
```

## –ö—Ä–æ–∫ 5: –Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑ —Ç–æ–∫–µ–Ω–∞–º–∏
–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –æ–±–∏–¥–≤–∞ –¥–æ–¥–∞—Ç–∫–∏ —ñ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –æ–Ω–æ–≤–∏–ª–∏—Å—è —Ç–æ–∫–µ–Ω–∏.

## –ö—Ä–æ–∫ 6: –¢–µ—Å—Ç–æ–≤–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
–°—Ç–≤–æ—Ä—ñ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó `test_notifications`:
```json
{
  "title": "–¢–µ—Å—Ç",
  "body": "–¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫–æ–Ω—Å–æ–ª—ñ"
}
```
–¶–µ –º–∞—î —Å–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `testNotification`.