# ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û: –ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∞ Cloud FCM —Å–∏—Å—Ç–µ–º–∞ —Å–ø–æ–≤—ñ—â–µ–Ω—å

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢**
‚úÖ **FCM —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –ø–æ–≤–Ω—ñ—Å—Ç—é!** –°—Ç–≤–æ—Ä–µ–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –≤ Firestore —ñ –±—É–¥—É—Ç—å –æ–±—Ä–æ–±–ª–µ–Ω—ñ Cloud Functions.

## üîß **–©–û –ë–£–õ–û –ó–†–û–ë–õ–ï–ù–û:**

### 1. **–ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—è –Ω–∞ Cloud-Only –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É**
- ‚ùå –í–∏–¥–∞–ª–µ–Ω–æ –≤—Å—ñ –ª–æ–∫–∞–ª—å–Ω—ñ —Ç–∞–π–º–µ—Ä–∏ —ñ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
- ‚úÖ –ó–∞–ª–∏—à–µ–Ω–æ —Ç—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ FCM —Å—Ç–∞–ª–æ —î–¥–∏–Ω–∏–º –¥–∂–µ—Ä–µ–ª–æ–º —Å–ø–æ–≤—ñ—â–µ–Ω—å

### 2. **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ Firestore —ñ–Ω–¥–µ–∫—Å–∏**
- ‚úÖ –î–æ–¥–∞–Ω–æ –∫–æ–º–ø–æ–∑–∏—Ç–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –¥–ª—è `scheduled_notifications`
- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ `firebase.json` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é
- ‚úÖ –£—Å—É–Ω—É—Ç–æ –ø–æ–º–∏–ª–∫–∏ "FAILED_PRECONDITION" –≤ Cloud Functions

### 3. **–î–æ–¥–∞–Ω–∞ –ø–æ–≤–Ω–∞ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è FCM**
- ‚úÖ –í—Å—ñ —Ç–µ–∫—Å—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å —Ç–µ–ø–µ—Ä –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ (—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞/—Ä–æ—Å—ñ–π—Å—å–∫–∞)
- ‚úÖ –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–∞–∑–≤ –ø–æ—Å–ª—É–≥ –≤ FCM —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è—Ö
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ñ —Ç–µ–∫—Å—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –º–æ–≤–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### 4. **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–æ—á–∫–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó**
- ‚úÖ `sessionAdd.dart` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î FCM —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏ –Ω–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ
- ‚úÖ `sessionEdit.dart` - –æ–Ω–æ–≤–ª—é—î FCM —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—ñ
- ‚úÖ `app_state_provider.dart` - —Ä–µ–∑–µ—Ä–≤–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º FCM –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è

### 5. **–î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —ñ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
- ‚úÖ –î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ª–æ–≥–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
- ‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–µ–±–∞–≥—ñ–Ω–≥—É FCM –ø—Ä–æ—Ü–µ—Å—ñ–≤
- ‚úÖ –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –≤—Å—å–æ–≥–æ –ø–æ—Ç–æ–∫—É —Å–ø–æ–≤—ñ—â–µ–Ω—å

## üì± **–¢–ò–ü–ò –°–ü–û–í–Ü–©–ï–ù–¨ (–∑ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—î—é):**

### **1. –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –∑–∞ 30 —Ö–≤–∏–ª–∏–Ω**
**üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞:**
```
–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ –∑–∞–ø–∏—Å
–ß–µ—Ä–µ–∑ 30 —Ö–≤–∏–ª–∏–Ω: –ú–∞—Ä—ñ—è —É –º–∞–π—Å—Ç—Ä–∞ –ê–Ω–Ω–∞
```
**üá∑üá∫ –†–æ—Å—ñ–π—Å—å–∫–∞:**  
```
–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏
–ß–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç: –ú–∞—Ä—ñ—è —É –º–∞—Å—Ç–µ—Ä–∞ –ê–Ω–Ω–∞
```

### **2. –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–µ—Å—ñ—ó**
**üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞:**
```
‚è∞ –°–µ–∞–Ω—Å –∑–∞–≤–µ—Ä—à–µ–Ω
–ú–∞—Ä—ñ—è - –ú–∞–Ω—ñ–∫—é—Ä –∫–ª–∞—Å–∏—á–Ω–∏–π
–ú–∞–π—Å—Ç—Ä–∏–Ω—è: –ê–Ω–Ω–∞
–ë—É–¥—å –ª–∞—Å–∫–∞, –æ–Ω–æ–≤—ñ—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å—É
```
**üá∑üá∫ –†–æ—Å—ñ–π—Å—å–∫–∞:**
```
‚è∞ –°–µ–∞–Ω—Å –∑–∞–≤–µ—Ä—à–µ–Ω  
–ú–∞—Ä—ñ—è - –ú–∞–Ω–∏–∫—é—Ä –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π
–ú–∞—Å—Ç–µ—Ä–∏—Ü–∞: –ê–Ω–Ω–∞
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏
```

### **3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—è (—á–µ—Ä–µ–∑ 15 —Ö–≤ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è)**
**üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞:**
```
‚ùå –ó–∞–ø–∏—Å –ø—Ä–æ–ø—É—â–µ–Ω–æ
–ú–∞—Ä—ñ—è - –ü–µ–¥–∏–∫—é—Ä –∫–ª–∞—Å–∏—á–Ω–∏–π  
–ú–∞–π—Å—Ç—Ä–∏–Ω—è: –ê–Ω–Ω–∞
–ó–∞–ø–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∑–Ω–∞—á–µ–Ω–æ —è–∫ –ø—Ä–æ–ø—É—â–µ–Ω–∏–π
```
**üá∑üá∫ –†–æ—Å—ñ–π—Å—å–∫–∞:**
```
‚ùå –ó–∞–ø–∏—Å—å –ø—Ä–æ–ø—É—â–µ–Ω–∞
–ú–∞—Ä—ñ—è - –ü–µ–¥–∏–∫—é—Ä –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π
–ú–∞—Å—Ç–µ—Ä–∏—Ü–∞: –ê–Ω–Ω–∞
–ó–∞–ø–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–∞—è
```

## ‚ö° **–¢–ï–•–ù–Ü–ß–ù–ê –ê–†–•–Ü–¢–ï–ö–¢–£–†–ê:**

1. **–ì—ñ–±—Ä–∏–¥–Ω—ñ Cloud Functions:**
   - `processNewNotification` - –º–∏—Ç—Ç—î–≤–∞ –æ–±—Ä–æ–±–∫–∞ —á–µ—Ä–µ–∑ Firestore —Ç—Ä–∏–≥–µ—Ä
   - `processScheduledNotifications` - –ø—ñ–¥—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω

2. **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞–π–º-–∞—É—Ç–∏:**
   - –¢—Ä–∏–≥–µ—Ä —Ñ—É–Ω–∫—Ü—ñ—è: 1 —Ö–≤–∏–ª–∏–Ω–∞, 256MiB RAM
   - –®–µ–¥—É–ª–µ—Ä —Ñ—É–Ω–∫—Ü—ñ—è: 3 —Ö–≤–∏–ª–∏–Ω–∏, 512MiB RAM

3. **–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Å—Ç–∞—Ä–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å —Å—Ç–∞—Ä—à–∏—Ö –∑–∞ 10 —Ö–≤–∏–ª–∏–Ω

4. **Firestore –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è:**
   - –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å –º–∞—Ä–∫—É–≤–∞–Ω–Ω—è `cancelled` 
   - –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏ –¥–ª—è —à–≤–∏–¥–∫–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

## üîÑ **–ü–û–¢–Ü–ö –†–û–ë–û–¢–ò:**

1. **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä—é—î/—Ä–µ–¥–∞–≥—É—î –∑–∞–ø–∏—Å** ‚Üí 
2. **FCMService —Å—Ç–≤–æ—Ä—é—î 3 –∑–∞–ø–∏—Å–∏** –≤ `scheduled_notifications` ‚Üí
3. **Firestore —Ç—Ä–∏–≥–µ—Ä –º–∏—Ç—Ç—î–≤–æ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î** ‚Üí 
4. **Cloud Functions –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î FCM** ‚Üí
5. **–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏—Ö–æ–¥—è—Ç—å –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω–æ** –Ω–∞ –≤—Å—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó

## ‚ú® **–ü–ï–†–ï–í–ê–ì–ò –ù–û–í–û–á –°–ò–°–¢–ï–ú–ò:**

- üöÄ **–®–≤–∏–¥–∫—ñ—Å—Ç—å:** –ú–∏—Ç—Ç—î–≤–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Firestore —Ç—Ä–∏–≥–µ—Ä  
- üîí **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å:** –ü—ñ–¥—Å—Ç—Ä–∞—Ö–æ–≤–æ—á–Ω–∏–π —à–µ–¥—É–ª–µ—Ä + –∑–∞—â—ñ—Ç–∞ –≤—ñ–¥ —Å—Ç–∞—Ä–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å
- üåç **–õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è:** –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –º–æ–≤–æ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- üì± **–ö—Ä–æ—Å–ø–ø–ª–∞—Ç—Ñ–æ—Ä–º–Ω—ñ—Å—Ç—å:** –ü—Ä–∞—Ü—é—î –Ω–∞ –≤—Å—ñ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- üíæ **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è:** –ú–µ–Ω—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –∫–ª—ñ—î–Ω—Ç, –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- üßπ **–ß–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥—É:** –ü—Ä–æ—Å—Ç—ñ—à–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –ª–æ–∫–∞–ª—å–Ω–∏—Ö —Ç–∞–π–º–µ—Ä—ñ–≤

## üéâ **–°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –î–û –ü–†–û–î–ê–ö–®–ù–£!**

–¢–µ–ø–µ—Ä —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—é—Ç—å –ø–æ–≤–Ω—ñ—Å—Ç—é —á–µ—Ä–µ–∑ —Ö–º–∞—Ä—É, –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—é —ñ –ø—Ä–∏—Ö–æ–¥—è—Ç—å –Ω–∞–¥—ñ–π–Ω–æ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Å—Ç–∞–Ω—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.